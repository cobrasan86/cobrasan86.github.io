(function(){"use strict";function t(t,e){return e=e||null,new Promise(function(o,n){s.post(ajaxurl+"?action="+t,{data:JSON.stringify(e),_ajax_nonce:i.nonce}).done(function(t){t.success?o(t.data):n(t.data)}).fail(n)})}function e(t){console.log(t),"string"!=typeof t&&(t=t.statusText?t.statusText:"Error"),l.error=t,l.loading=!1,clearTimeout(r),r=setTimeout(()=>l.error="",5e3)}function o(t){a=fetch(ajaxurl+"?action=wpfront_scroll_top_get_static&v="+t).then(t=>t.ok?t.json():Promise.reject("bad request")).then(t=>t.success?t.data:Promise.reject(t.data)).then(t=>(i.labels=t.labels,i.help=t.help,i.location_options=t.location_options,i.button_style_options=t.button_style_options,i.button_action_options=t.button_action_options,i.icons_list=t.icons_list,i.filter_options=t.filter_options,i.filter_posts_list=t.filter_posts_list,i.current_location=t.current_url,t.templates)).then(t=>{p.component("DisplaySettings",{template:t["display-settings"],data:()=>i}),p.component("ButtonActionSettings",{template:t["button-action-settings"],data:()=>i}),p.component("LocationSettings",{template:t["location-settings"],data:()=>i}),p.component("ImageButtonSettings",{template:t["image-button-settings"],data:()=>i,methods:{mediaLibrary(){var t=this;wp.media.frames.file_frame||(wp.media.frames.file_frame=wp.media({title:i.labels.media_library_title,multiple:!1,library:{type:"image"},button:{text:i.labels.media_library_text}}).on("select",function(){var e=wp.media.frames.file_frame.state().get("selection").first().toJSON();t.data.custom_url=e.url,t.data.image="custom",t.data.image_alt=t.data.image_alt||e.alt||e.title})),wp.media.frames.file_frame.open()}}}),p.component("FontAwesomeButtonSettings",{template:t["font-awesome-button-settings"],data:()=>i}),p.component("TextButtonSettings",{template:t["text-button-settings"],data:()=>i}),p.component("HelpIcon",{props:["helpText"],template:t["help-icon"]}),p.component("ColorPicker",{props:["modelValue"],template:t["color-picker"]}),p.component("FilterSettings",{template:t["filter-settings"],data:()=>i}),p.component("PostsFilterSelection",{props:["modelValue","postsList"],template:t["posts-filter-selection"],computed:{selectedPosts:{get(){return this.modelValue.split(",")},set(t){this.$emit("update:modelValue",t.filter(t=>t).join().trim())}}}})})}function n(){s("#scroll-top-content").length>0?Promise.all([c,a]).then(()=>{p.mount("#scroll-top-content")}).catch(t=>{e(t)}):setTimeout(n,200)}let a,s=jQuery,i={loading:!0,error:"",nonce:""},l=null,r=0,c=t("wpfront_scroll_top_get_data").then(t=>{i.data=t.data,i.nonce=t.nonce}),p=Vue.createApp({data:()=>i,created(){s(function(){s("#scroll-top-content").find(".if-js-closed").removeClass("if-js-closed").addClass("closed"),postboxes.add_postbox_toggles("wpfront-scroll-top")})},mounted(){l=this,this.loading=!1},methods:{submit(){this.loading||(this.loading=!0,this.error="",t("wpfront_scroll_top_submit_data",i.data).then(t=>{window.location.replace(t)}).catch(t=>{e(t)}))}}});p.use(ElementPlus),window.load_wpf_st=function(t){o(t),n()}})();